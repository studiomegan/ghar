<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="copyright">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/> <!--320 VOORKOM ZOOM OP MOBILE-->
        <title>Snap</title>
        <script src="snap.svg-min.js"></script>
        <script src="hammer.js"></script>
        <script src="snap.svg.free_transform.js"></script>
        <!--<script src="https://alias.io/raphael/free_transform/raphael.js"></script>
		<script src="https://alias.io/raphael/free_transform/raphael.free_transform/raphael.free_transform.js"></script>-->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <style type="text/css">
        	@import url('https://fonts.googleapis.com/css?family=Open+Sans:800');

			body, html {
				padding:0;
				margin:0;
				height: 100%;
				width: 100%;
			}
        	svg {
    			display: block;
  			}
  			#main-container, #holder {
                position: fixed;
                top: 0px;
                left: 0px;
                width: 100%;
                height: 100%;
            }
  			svg text {
  				font-family: 'Open Sans', sans-serif !important;
				font-weight: 900 !important; 
				font-size: 100px !important; 
				fill: blue !important;
				transform: 200% !important;
			}
			.color {
				fill: blue !important;
			}
			button {
				cursor: pointer;
				z-index: 99;
				position: absolute;
			}
			canvas {
				width: 100%;
				height: 100%;
			}
        </style>
        <script>

			window.onload = function () {
				// FREE TRANSFORM
				var paper = Snap('#main-container');
				var h = paper.text(100, 200, 'H').transform( 'r80');
	            var o = paper.text(600, 450, 'O').transform( 'r10');
				var p = paper.text(200, 350, 'P').transform( 'r180');
				var e = paper.text(400, 600, 'E').transform( 'r90');

				var letters = [h, o, p, e];

				for (i = 0; i < letters.length; i++) {
					var object = letters[i];
		            var ft = paper.freeTransform(object, { snap: { rotate: 1 }, size: 5, draw: 'bbox' });
		          
		            //ft.attrs.rotate = 45;
		            //ft.attrs.scale.x = 1;

					// Hide freeTransform handles
					ft.hideHandles();

					// Show hidden freeTransform handles
					ft.showHandles();

		            ft.apply();
		            }

		            object.data('ftStatus', 1);

			}

			

        </script>
        <head></head>
        <body>
        	<button>svg to png</button>
        	<svg id="main-container"></svg>
        	<canvas id="canvas"></canvas>
        	<script type="text/javascript">//Download as image
			var btn = document.querySelector('button');
			var svg = document.querySelector('svg');
			var canvas = document.querySelector('canvas');

			function triggerDownload (imgURI) {
			  var evt = new MouseEvent('click', {
			    view: window,
			    bubbles: false,
			    cancelable: true
			  });

			  var a = document.createElement('a');
			  a.setAttribute('download', 'MY_COOL_IMAGE.png');
			  a.setAttribute('href', imgURI);
			  a.setAttribute('target', '_blank');

			  a.dispatchEvent(evt);
			}

			btn.addEventListener('click', function () {
			  var canvas = document.getElementById('canvas');
			  var ctx = canvas.getContext('2d');
			  var data = (new XMLSerializer()).serializeToString(svg);
			  var DOMURL = window.URL || window.webkitURL || window;

			  var img = new Image();
			  var svgBlob = new Blob([data], {type: 'image/svg+xml;charset=utf-8'});
			  var url = DOMURL.createObjectURL(svgBlob);

			  img.onload = function () {
			    ctx.drawImage(img, 0, 0);
			    DOMURL.revokeObjectURL(url);

			    var imgURI = canvas
			        .toDataURL('image/png')
			        .replace('image/png', 'image/octet-stream');

			    triggerDownload(imgURI);
			  };

			  img.src = url;
			});</script>
        </body>
